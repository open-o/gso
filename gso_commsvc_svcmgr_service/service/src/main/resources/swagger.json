{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "GSO NBI",
        "description": "API of GSO"
    },
    "basePath": "/openoapi/gso/v1",
    "schemes": [
        "http"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "paths": {
        "/service": {
            "post": {
                "summary": "Create service instance",
                "description": "It creates a service instance based on request body.",
                "operationId": "createService",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Parameters needed to create service instance.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/services"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Service instance is created successfully.",
                        "schema": {
                            "$ref": "#/definitions/serviceId"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    }
                }
            },
            "get": {
                "summary": "query list of service instances",
                "description": "query basic information of service instances",
                "operationId": "getAllInstances",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "query successfully",
                        "schema": {
                            "$ref": "#/definitions/service"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    }
                }
            }
        },
        "/service/toposequence/{serviceId}": {
            "get": {
                "summary": "get topology sequence of service segment",
                "description": "show service segment by sequnece number which is defined in service template",
                "operationId": "getTopoSequence",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "serviceId",
                        "in": "path",
                        "description": "service instace id",
                        "required": true,
                        "type": "string",
                        "format": "uuid"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "get successfully.",
                        "schema": {
                            "$ref": "#/definitions/ServiceTopology"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    }
                }
            }
        },
        "/service/{serviceId}": {
            "delete": {
                "summary": "delete service instance",
                "description": "delete service instance",
                "operationId": "deleteService",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "serviceId",
                        "in": "path",
                        "description": "service instance id",
                        "required": true,
                        "type": "string",
                        "format": "uuid"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "delete successfully.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    }
                }
            }
        },
        "/nspackages": {
            "post": {
                "summary": "GSO Package onboarding",
                "description": "set status of gso package to be onboarding",
                "operationId": "onBoardingPackage",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "GSAR package ID which catalog provides",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/csarId"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "update successfully.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    }
                }
            }
        },
        "/nspackages/{csarId}": {
            "delete": {
                "summary": "delete GSAR package",
                "description": "delete GSAR package",
                "operationId": "deleteGsarPackage",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "csarId",
                        "in": "path",
                        "description": "GSAR package ID which catalog provides",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "delete successfully.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    }
                }
            }
        },
        "/gsodrivers/ns/create": {
            "post": {
                "summary": "Create GSO Service Segment",
                "description": "it will create a GS-O segment instance specified in the request",
                "operationId": "createGsoNs",
                "consumes": [
                    "application/json;charset=UTF-8"
                ],
                "produces": [
                    "application/json;charset=UTF-8"
                ],
                "parameters": [
                    {
                        "name": "nsCreatRequest",
                        "in": "body",
                        "description": "parameters needed to create gso service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "create gso service segment success",
                        "schema": {
                            "$ref": "#/definitions/GsoNsCreateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/gsodrivers/ns/delete": {
            "post": {
                "summary": "Delete GSO Service Segment",
                "description": "it will delete a GS-O segment instance specified in the request",
                "operationId": "deleteGsoNs",
                "consumes": [
                    "application/json;charset=UTF-8"
                ],
                "produces": [
                    "application/json;charset=UTF-8"
                ],
                "parameters": [
                    {
                        "name": "nsDeleteRequest",
                        "in": "body",
                        "description": "parameters needed to delete gso service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "delete gso service segment success",
                        "schema": {
                            "$ref": "#/definitions/GsoNsDeleteRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/gsodrivers/jobs/{jobId}": {
            "get": {
                "summary": "Get GSO Service Segment Operation Status",
                "description": "it will get a GS-O segment instance operation status specified in the request",
                "operationId": "queryGsoNsProgress",
                "consumes": [
                    "application/json;charset=UTF-8"
                ],
                "produces": [
                    "application/json;charset=UTF-8"
                ],
                "parameters": [
                    {
                        "name": "jobId",
                        "in": "path",
                        "description": "job id of the gso service segment to be queried",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "query gso service segment operation status success",
                        "schema": {
                            "$ref": "#/definitions/NsQueryRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/nfvodrivers/ns": {
            "post": {
                "summary": "Create NFVO Service Segment",
                "description": "it will create a NFV-O segment instance specified in the request",
                "operationId": "createNfvoNs",
                "parameters": [
                    {
                        "name": "nsCreateRequest",
                        "in": "body",
                        "description": "parameters needed to create nfvo service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "create nfvo service segment success",
                        "schema": {
                            "$ref": "#/definitions/NsCreateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/nfvodrivers/{nsInstanceId}/instantiate": {
            "post": {
                "summary": "Instantiate NFVO Service Segment",
                "description": "it will instantiate a NFV-O segment instance specified in the request",
                "operationId": "instantiateNfvoNs",
                "parameters": [
                    {
                        "name": "nsInstantiateRequest",
                        "in": "body",
                        "description": "parameters needed to instantiate nfvo service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    },
                    {
                        "name": "nsInstanceId",
                        "in": "path",
                        "description": "id of segment instance",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "instantiate nfvo service segment success",
                        "schema": {
                            "$ref": "#/definitions/NsInstantiateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/nfvodrivers/ns/terminate": {
            "post": {
                "summary": "Terminate NFVO Service Segment",
                "description": "it will terminate a NFV-O segment instance specified in the request",
                "operationId": "terminateNfvoNs",
                "parameters": [
                    {
                        "name": "nsTerminateRequest",
                        "in": "body",
                        "description": "parameters needed to terminate nfvo service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "terminate nfvo service segment success",
                        "schema": {
                            "$ref": "#/definitions/NsTerminateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/nfvodrivers/ns/delete": {
            "post": {
                "summary": "Delete NFVO Service Segment",
                "description": "it will delete a NFV-O segment instance specified in the request",
                "operationId": "deleteNfvoNs",
                "parameters": [
                    {
                        "name": "nsDeleteRequest",
                        "in": "body",
                        "description": "parameters needed to delete nfvo service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "delete nfvo service segment success"
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/nfvodrivers/jobs/{jobId}": {
            "get": {
                "summary": "Get NFVO Service Segment Operation Status",
                "description": "it will get a NFV-O segment instance operation status specified in the request",
                "operationId": "queryNfvoNsProgress",
                "consumes": [
                    "application/json;charset=UTF-8"
                ],
                "produces": [
                    "application/json;charset=UTF-8"
                ],
                "parameters": [
                    {
                        "name": "jobId",
                        "in": "path",
                        "description": "job id of the nfvo service segment to be queried",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "query nfvo service segment operation status success",
                        "schema": {
                            "$ref": "#/definitions/NsQueryRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/sdnodrivers/ns": {
            "post": {
                "summary": "Create SDNO Service Segment",
                "description": "it will create a SDN-O segment instance specified in the request",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "parameters needed to create sdno service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "create sdno service segment success",
                        "schema": {
                            "$ref": "#/definitions/NsCreateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/sdnodrivers/{nsInstanceId}/instantiate": {
            "post": {
                "summary": "Instantiate SDNO Service Segment",
                "description": "it will instantiate a SDN-O segment instance specified in the request",
                "parameters": [
                    {
                        "name": "nsInstantiateRequest",
                        "in": "body",
                        "description": "parameters needed to instantiate sdno service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    },
                    {
                        "name": "nsInstanceId",
                        "in": "path",
                        "description": "id of segment instance",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "instantiate sdno service segment success",
                        "schema": {
                            "$ref": "#/definitions/NsInstantiateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/sdnodrivers/ns/terminate": {
            "post": {
                "summary": "Terminate SDNO Service Segment",
                "description": "it will terminate a SDN-O segment instance specified in the request",
                "parameters": [
                    {
                        "name": "nsTerminateRequest",
                        "in": "body",
                        "description": "parameters needed to terminate sdno service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "terminate sdno service segment success",
                        "schema": {
                            "$ref": "#/definitions/NsTerminateRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/sdnodrivers/ns/delete": {
            "post": {
                "summary": "Delete SDNO Service Segment",
                "description": "it will delete a SDN-O segment instance specified in the request",
                "parameters": [
                    {
                        "name": "nsDeleteRequest",
                        "in": "body",
                        "description": "parameters needed to delete sdno service segment.",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/NsReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "delete sdno service segment success"
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        },
        "/sdnodrivers/jobs/{jobId}": {
            "get": {
                "summary": "Get SDNO Service Segment Operation Status",
                "description": "it will get a SDN-O segment instance operation status specified in the request",
                "operationId": "querySdnoNsProgress",
                "consumes": [
                    "application/json;charset=UTF-8"
                ],
                "produces": [
                    "application/json;charset=UTF-8"
                ],
                "parameters": [
                    {
                        "name": "jobId",
                        "in": "path",
                        "description": "job id of the sdno service segment to be queried",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "query sdno service segment operation status success",
                        "schema": {
                            "$ref": "#/definitions/NsQueryRsp"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Result"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "NsReq": {
            "type": "object",
            "description": "service segment request structure",
            "required": [
                "nodeTemplateName",
                "segments"
            ],
            "properties": {
                "nodeTemplateName": {
                    "type": "string",
                    "description": "name of the node template"
                },
                "segments": {
                    "type": "string",
                    "description": "parameters needed to create service segment"
                }
            }
        },
        "NsCreateRsp": {
            "type": "object",
            "description": "service segment response structure for create",
            "required": [
                "nsInstanceId"
            ],
            "properties": {
                "nsInstanceId": {
                    "type": "string",
                    "description": "service segment instance id"
                }
            }
        },
        "GsoNsCreateRsp": {
            "type": "object",
            "description": "service segment response structure for create gso ns",
            "properties": {
                "service": {
                    "type": "object",
                    "required": [
                        "serviceId",
                        "operationId"
                    ],
                    "properties": {
                        "serviceId": {
                            "type": "string",
                            "description": "service segment instance id"
                        },
                        "operationId": {
                            "type": "string",
                            "description": "service segment instance operation id"
                        }
                    }
                }
            }
        },
        "GsoNsDeleteRsp": {
            "type": "object",
            "description": "service segment response structure for delete gso ns",
            "required": [
                "operationId"
            ],
            "properties": {
                "operationId": {
                    "type": "string",
                    "description": "service segment instance operation id"
                }
            }
        },
        "NsInstantiateRsp": {
            "type": "object",
            "description": "service segment response structure for instantiate",
            "required": [
                "jobId"
            ],
            "properties": {
                "jobId": {
                    "type": "string",
                    "description": "service segment job id for instantiate"
                }
            }
        },
        "NsTerminateRsp": {
            "type": "object",
            "description": "service segment response structure for instantiate",
            "required": [
                "jobId"
            ],
            "properties": {
                "jobId": {
                    "type": "string",
                    "description": "service segment job id for instantiate"
                }
            }
        },
        "Result": {
            "type": "object",
            "description": "a general structure for reporting failure",
            "properties": {
                "status": {
                    "type": "string",
                    "description": "success or failure"
                },
                "statusDescription": {
                    "type": "string",
                    "description": "detail description"
                },
                "errorCode": {
                    "type": "integer",
                    "description": "error code"
                }
            }
        },
        "NsQueryRsp": {
            "type": "object",
            "description": "service segment job status structure",
            "required": [
                "jobId",
                "responseDescriptor"
            ],
            "properties": {
                "jobId": {
                    "type": "string",
                    "description": "job id"
                },
                "responseDescriptor": {
                    "$ref": "#/definitions/ResponseDescriptor"
                }
            }
        },
        "ResponseDescriptor": {
            "type": "object",
            "description": "service segment job status response desc",
            "required": [
                "status"
            ],
            "properties": {
                "status": {
                    "type": "string",
                    "description": "status of the job"
                },
                "statusDescription": {
                    "type": "string",
                    "description": "description of the job status"
                },
                "progress": {
                    "type": "string",
                    "description": "progress of the job"
                },
                "errorCode": {
                    "type": "string",
                    "description": "status of the job"
                },
                "responseId": {
                    "type": "string",
                    "description": "id of the response"
                }
            }
        },
        "service": {
            "type": "object",
            "description": "service instance structure",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "the name of service instance"
                },
                "description": {
                    "type": "string",
                    "description": "the description of service instance"
                },
                "serviceDefId": {
                    "type": "string",
                    "description": "GSAR service package ID"
                },
                "templateId": {
                    "type": "string",
                    "description": "ID of yaml file which is defined in Definitions directory"
                },
                "templateName": {
                    "type": "string",
                    "description": "The name of yaml file which is defined in Definitions directory"
                },
                "parameters": {
                    "type": "string",
                    "description": "Parameters that are used to create service instace"
                }
            }
        },
        "serviceId": {
            "type": "string",
            "description": "service id"
        },
        "result": {
            "type": "object",
            "description": "a general structure for reporting failure",
            "properties": {
                "status": {
                    "type": "string",
                    "description": "success or  fail"
                },
                "statusDescription": {
                    "type": "string",
                    "description": "the detail of failure"
                },
                "errorCode": {
                    "type": "integer",
                    "description": "error code"
                }
            }
        },
        "services": {
            "type": "object",
            "description": "service instance structure",
            "required": [
                "serviceId",
                "name",
                "description",
                "createdAt",
                "activeStatus",
                "status",
                "templateName"
            ],
            "properties": {
                "serviceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "service instance ID"
                },
                "name": {
                    "type": "string",
                    "description": "name of service instance"
                },
                "description": {
                    "type": "string",
                    "description": "description of service instance"
                },
                "createdAt": {
                    "type": "string",
                    "description": "Time to creat service instance"
                },
                "activeStatus": {
                    "type": "string",
                    "description": "status of service instace, active or deactive"
                },
                "status": {
                    "type": "string",
                    "description": "operation status of service instace, creatSucceed, createFailed or deleteFailed."
                },
                "templateName": {
                    "type": "string",
                    "description": "name of service template that is used to create service instance."
                }
            }
        },
        "ServiceTopology": {
            "type": "object",
            "description": "service topology information",
            "required": [
                "serviceId",
                "serviceSegments"
            ],
            "properties": {
                "serviceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "service instance ID"
                },
                "serviceSegments": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/ServiceSegment"
                    },
                    "description": "service segments of service instance"
                }
            }
        },
        "ServiceSegment": {
            "type": "object",
            "description": "service segment",
            "required": [
                "serviceSegmentId",
                "type",
                "topoSeqNumber"
            ],
            "properties": {
                "serviceSegmentId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "service segment ID"
                },
                "type": {
                    "type": "string",
                    "description": "service node type of service segment"
                },
                "topoSeqNumber": {
                    "type": "string",
                    "description": "number that service segment represent in topology."
                }
            }
        },
        "csarId": {
            "type": "string",
            "description": "GSAR package id that catalog provides"
        }
    }
}